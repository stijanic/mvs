<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>TurnKey4-HOWTO.html</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

</head>

<body>

<h1 id="emulator">Emulator</h1>
<ul>
<li>HerculesStudio in order to point to TK4- installation:
<ul>
<li>Be sure to configure Hercules’ Directory to <code>&lt;NONE&gt;</code></li>
<li>Load environment variables: <code>source ~/.HerculesStudio</code></li>
<li>Configuration Directory = <code>$HOME/Software/tk4-_v1.00_current/conf</code></li>
<li>Logs Directory = <code>$HOME/Software/tk4-_v1.00_current/log</code></li>
</ul></li>
<li>HerculesStudio
<ul>
<li>Don’t use script <code>scripts/ipl.rc</code> to IPL as it goes wild quite often, use manual IPL…</li>
</ul></li>
<li>Environment variables in .HerculesStudio:
<ul>
<li><code>export PATH=$HOME/Software/tk4-_v1.00_current/hercules/linux/64/bin:$PATH</code></li>
<li><code>export LD_LIBRARY_PATH=$HOME/Software/tk4-_v1.00_current/hercules/linux/64/lib:$HOME/Software/tk4-_v1.00_current/hercules/linux/64/lib/hercules:$LD_LIBRARY_PATH</code></li>
<li><code>#export HERCULES_RC=$HOME/Software/tk4-_v1.00_current/scripts/ipl.rc</code></li>
</ul></li>
<li>HercGUI
<ul>
<li>Rename <code>ipl.rc</code> to <code>hercules.rc</code> and place it in Configuration Files directory which has to be the “target dir”</li>
</ul></li>
<li>HercPrt
<ul>
<li>Printing using <code>mvs38j-33lines.ini</code> configuration: <code>submit printa.jcl</code></li>
</ul></li>
<li>SHELL
<ul>
<li>Print output: <code>tail -f prt00e.txt</code></li>
</ul></li>
<li>CONSOLE
<ul>
<li>Add one console (<code>0010 3270</code> // <code>0011 3270</code>) just before the line “<code>INCLUDE conf/${TK4CONS:=intcons}.cnf</code>” in <code>tk4-.cnf</code> and don’t use mvs script to IPL, then execute: <code>x3270 localhost:3270</code> # 3270</li>
</ul></li>
<li>File transfer parameters: <code>fixed 80/3120</code></li>
<li>Cancel everything: <code>PA1</code></li>
<li>Getting help for screen command for usage with c3270: <code>Ctrl-A ?</code></li>
<li>Running curses version of terminal emulator: <code>c3270 127.0.0.1:3270</code></li>
<li>Use option <code>x3270 -oversize 90x45</code> to display all characters in RFE/RPF or set it in .Xresources: <code>x3270.oversize: 90x45</code></li>
<li>Running scripts version (actions) of terminal emulator - http://x3270.bgp.nu/x3270-script.html: <code>s3270</code></li>
<li>Running a session with script listener: <code>x3270 -scriptport 9999</code></li>
<li>Executing a script through running x3270:<code>for X in $(cat actions.txt); do x3270if -t 9999 "$X"; done</code></li>
<li>Script for logon: <code>connect(127.0.0.1:3270)</code> <code>pf(3)</code> <code>string(herc01)</code> <code>enter()</code> <code>enter()</code> <code>string(cul8tr)</code> <code>enter()</code> <code>enter()</code> <code>enter()</code></li>
<li>Script for logoff: <code>pf(3)</code> <code>string(logoff)</code> <code>enter()</code> <code>disconnect()</code></li>
<li>Printing the session in x3scr* files, /tmp on Linux and Desktop on Windows # 3278</li>
<li>JRP logon for printing: logon applid=cjrp // PF12, PF1 and PF8 (PF9)</li>
<li>LU for printing is specified in tk4-.cnf:00C7 3287 - LU = 00C7</li>
<li>Printing to local printer from x3270 requires to stop printer session after the job is purged</li>
<li>Emulates a printer: pr3287 -crlf -eojtimeout 60 “0C7@127.0.0.1:3270”</li>
<li>Prints to PDF file on Linux with CUPS-PDF Printer: pr3287 -trace -crlf -eojtimeout 60 “0C7@127.0.0.1:3270”</li>
</ul>
<h1 id="hercules">Hercules</h1>
<ul>
<li>Execute a Hercules command - Load a tape: devinit 0480 tapes/vs2start.het</li>
<li>Execute a Hercules command (USER,PASSWORD might be supplied in JCL because of RAKF) - Run a job : devinit 000C jcl/iebgener.jcl</li>
<li>Accessing semi-graphical console (Esc key): run set_console_mode once</li>
<li>Get semi-graphical console commands: Start hercules without -d parameter // hit ESC</li>
<li>Execute an MVS System Command: /display u // /send ‘test message’ herc01</li>
<li>Submitting jobs via the socket reader (HercGUI), USER and PASSWORD fields in JOB statement are mandatory: hercrdr.exe 127.0.0.1:3505 restore.jcl</li>
<li>Redirecting A class output device to a socket in config file: “#000E 1403 prt/prt00e.txt ${TK4CRLF}” // “000E 1403 127.0.0.1:1403 sockdev”</li>
<li>Create a new DASD: dasdinit -a -z test00.340 3350 TEST00</li>
<li>Create DASD from XMIT files (trailing CR in ctl file is mandatory): dasdload -a -z revhelp.ctl REVH00 3</li>
<li>List VTOC of DASD: dasdls REVH00</li>
<li>Print content of member of partitioned dataset: dasdcat -i REVH00 “GPRICE.REVIEW.HELP/FSHELP:a”</li>
<li>Unload members from partitioned dataset: dasdpdsu REVH00 GPRICE.REVIEW.HELP ascii</li>
<li>Print map of AWS tape: tapemap ./tapes/HERCULES.0000XX.het</li>
<li>Create a new HET volume: hetinit ./tapes/HERCULES.0000XX.het 0000XX HERC01</li>
<li>Print map of HET tape: hetmap ./tapes/HERCULES.0000XX.het</li>
<li>Force stop: script scripts/shutdown</li>
<li>MVS console: attach 010 3270 CONS // 127.0.0.1:3270 LUNAME=CONS // /v 010,console,auth=all</li>
<li>TCPIP??? add Microsoft loopback with hdwwiz // attach E20 3088 CTCI-W32 192.168.0.25 192.168.0.15 // attach E21 3088 CTCI-W32 192.168.0.25 192.168.0.15</li>
<li>Connect/disconnect terminal: /v net,act,id=cuu0c2 // /v net,inact,id=cuu0c2</li>
<li>Submit a job to sockdev Card Reader with netcat command: netcat -w1 localhost 3505 &lt; restore.jcl</li>
</ul>
<h1 id="mvs">MVS</h1>
<h2 id="ipl">IPL</h2>
<ul>
<li>IPL automated system:
<ul>
<li>command line:
<ul>
<li><code>HerculesStudio -f conf/tk4-.cnf &amp;</code></li>
</ul></li>
<li>interactive:
<ul>
<li><code>IPL 148</code></li>
<li><code>/R 00,CLPA</code> (<code>CVIO, CMD=00, CMD=01, CMD=02</code>)</li>
</ul></li>
</ul></li>
<li>IPL non automated system use nonexistent (<code>SYS1.PARMLIB.COMMND03</code>):
<ul>
<li><code>/R 00,CMD=03</code></li>
</ul></li>
<li>Stop system:
<ul>
<li><code>/F BSPPILOT,SHUTNOW</code></li>
<li><code>/$PJES2</code></li>
<li><code>/Z EOD</code></li>
<li><code>/QUIESCE</code></li>
</ul></li>
<li>Check what is running: <code>/D A,L</code></li>
<li>Cancel session: <code>/CANCEL U=HERC01</code></li>
<li>Reply to <code>*??</code> with: <code>/REPLY ??</code>, use <code>'CANCEL'</code> to cancel</li>
<li>Start ftpd: <code>/START FTPD,SRVPORT=2100</code> (FTPD is not working with some Hercules which are not shipped with TK4-)</li>
<li>Use ftp from Linux: <code>ftp localhost 2100</code></li>
</ul>
<h2 id="dasd">DASD</h2>
<ul>
<li>Display online DASDs: <code>/D U,DASD,ONLINE</code></li>
<li>Display offline DASDs: <code>/D U,DASD,OFFLINE</code></li>
<li>Get available device numbers/types for DASD: <code>/D U,DASD,OFFLINE,,999</code></li>
<li>Add a new DASD in <code>SYS1.PARMLIB(VATLST00)</code> : <code>TEST01,1,2,3350 VOL TEST01 DEVICE 340 FILE test01.340</code></li>
<li>Activate device: <code>ATTACH 340 3350 DASD/TEST01.340</code></li>
<li>Initialize 3350 disk TEST01: <code>ICKDSF/INIT3350.JCL</code></li>
<li>Vary DASD: <code>/V 340,ONLINE</code></li>
<li>Mount DASD: <code>/MOUNT 340,VOL=(SL,TEST01),USE=PRIVATE</code></li>
<li>Restore from tape to disk TEST01: <code>iehdasdr/restore.jcl</code> - data sets in <code>HERC01/TEST01</code> won’t be catalogued, use <code>c</code> in RFE to catalogue them.</li>
<li>Dump from disk TEST01 to tape: <code>iehdasdr/dump2tp.jcl</code> ## DATASETS</li>
<li>System configuration data set: <code>SYS1.PARMLIB</code></li>
<li>System commands/procedures and help: <code>SYS1.CMDLIB</code> <code>SYS1.PROCLIB</code> <code>SYS1.HELP</code></li>
<li>Additional system commands/procedures and help: <code>SYS2.CMDLIB</code> <code>SYS2.PROCLIB</code> <code>SYS2.HELP</code></li>
<li>Many JCL examples (ALGOL, FORTRAN, GCC, COBOL, PL1, RPG, …): <code>SYS2.JCLLIB</code></li>
<li>IBM utilities can be found in <code>SYS1.LINKLIB</code> partitioned data set</li>
<li>RAKF configuration: <code>SYS1.PARMLIB(RAKFINIT)</code></li>
</ul>
<h1 id="msgclasssysout">MSGCLASS/SYSOUT</h1>
<ul>
<li><code>A</code>: <code>prt/prt00e.txt</code></li>
<li><code>Z</code>: <code>prt/prt00f.txt</code></li>
<li><code>G</code>: 3287 printer</li>
<li><code>B</code>: <code>pch/pch00d.txt</code></li>
<li><code>X</code>: <code>prt/prt002.txt</code> - Held in <code>JES2PARM</code></li>
<li><code>-</code>: <code>pch/pch10d.txt</code> - Not defined in <code>JES2PARM</code></li>
</ul>
<h1 id="jes2">JES2</h1>
<ul>
<li>Cancel job: <code>/$c jXX</code></li>
<li>Cancel printer output: <code>/$c prt3</code></li>
<li>Re-configuring JES2 from MVS console:
<ul>
<li><code>/S JES2,,,PARM='COLD,NOREQ'</code></li>
<li><code>/S JES2,PARM='COLD,FORMAT'</code></li>
</ul></li>
<li>Execute a JES2 command:
<ul>
<li><code>/$d a</code></li>
<li><code>/$d i</code></li>
<li><code>/$d u,prts</code></li>
<li><code>/$d u,puns</code></li>
<li><code>/$d u,rdrs</code></li>
</ul></li>
<li>JES2 parameters file: <code>SYS1.JES2PARM(JES2PARM)</code></li>
</ul>
<h1 id="password">PASSWORD</h1>
<ul>
<li>HERC01/CUL8TR</li>
<li>HERC02/CUL8TR</li>
<li>HERC03/PASS4U</li>
<li>HERC04/PASS4U</li>
<li>TEST/SKYRPFXA</li>
</ul>
<h1 id="tso">TSO</h1>
<ul>
<li>Logon: HERC01</li>
<li>Reconnect: LOGON HERC01 RECONNECT</li>
<li>Start TSOAPPLS: TSOAPPLS</li>
<li>List volumes: LISTVOL</li>
<li>List catalogue: LISTCAT</li>
<li>Set prefix: PROFILE PREFIX(HERC01)</li>
<li>Remove prefix: PROFILE NOPREFIX</li>
<li>List all Data Sets in catalogue: LISTCAT CATALOG(‘SYS1.UCAT.TSO’) ALL</li>
<li>List details about Data Set: LISTCAT ENTRIES(‘HERC01.IEBGENE3.JCL’) ALL</li>
<li>List all JCL Data Sets in HERC01: LISTDS ’HERC01.*.JCL’</li>
<li>List of partitioned Data Sets TSO commands: LISTDS ‘SYS2.CMDLIB’ MEMBERS</li>
<li>List of partitioned Data Sets TSO helps: LISTDS ‘SYS2.HELP’ MEMBERS</li>
<li>List of partitioned Data Sets TSO procedures: LISTDS ‘SYS2.PROCLIB’ MEMBERS</li>
<li>List the content of the Data Set: LIST ‘HERC01.IEBGENE3.JCL’</li>
<li>Rename Data Set: RENAME ‘HERC01.COMPILE2.JCL’ ‘HERC01.COMPILE2.JCK’</li>
<li>Delete Data Set: DELETE ‘HERC01.COMPILE2.JCL’</li>
<li>Submit a job: SUBMIT ‘HERC01.IEBGENE3.JCL’</li>
<li>Get status of jobs: STATUS</li>
<li>Cancel job: CANCEL HERC01(JOB00019)</li>
<li>Get output of job: OUTPUT MYJOB(JOB00019)</li>
<li>Send message: SEND ‘This is my message’ USER(HERC02)</li>
<li>Display Direct-Access Storage Device: DDASD</li>
<li>Get the blocksize of device: BLKSPTRK 2314</li>
<li>Calculate blocksize BLKXXXX: BLK3390</li>
<li>Free all allocated Data Sets: FREEALL</li>
<li>List volume table of contents: VTOC PUB001</li>
<li>Remove jobs if it doesn’t have an output held: CANCEL ASMFCLG(JOB00034) PURGE</li>
<li>Print held output from class X to Z: OUTPUT HERC01X(JOB00032) NEWCLASS(Z)</li>
<li>Allocate and execute a CLIST: ALLOC F(SYSPROC) DA(CLIST) // %SONG</li>
<li>Execute a program from TSO (READY prompt) and get the output in console: CALL ‘HERC01.WORK.LOADLIB(HWFULL)’</li>
<li>Set screen-size: TERMINAL SCRSIZE(45, 140) // LETTERS LIST</li>
</ul>
<h1 id="rfe">RFE</h1>
<ul>
<li>Go to menu option X: =X</li>
<li>Go to start menu: =bye</li>
</ul>
<h1 id="queue">QUEUE</h1>
<ul>
<li>Get all jobs: status *</li>
<li>S (command): S[tatus]/C[ancel]/P[urge]/O[utput]</li>
<li>Q (class): A/Z/G/B/X</li>
</ul>
<h1 id="rpf">RPF</h1>
<ul>
<li>B - browse</li>
<li>C - catalog</li>
<li>D - delete</li>
<li>E - edit</li>
<li>I - info</li>
<li>M - member</li>
<li>R - rename</li>
<li>U - uncatalog</li>
<li>V - view</li>
<li>Z - compress</li>
</ul>

</body>
</html>
